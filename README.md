 # Документация по проекту "Python Server Hub"

---

## 1. Структура проекта

```
/
├── Server Hub.py
└── scripts/
    └── (загружаемые .py-скрипты, например, Telegram-боты)
```

---

## 2. Описание файлов

### **Server Hub.py**
- **Назначение:**  
  Единый исполняемый файл, объединяющий GUI (Tkinter), backend-сервер (Flask) и менеджер процессов для управления Python-скриптами.
- **Ключевые функции/классы:**  
  - `ScriptManager` — управление запуском/остановкой скриптов, хранение статусов и PID.
  - Flask API: эндпоинты `/upload`, `/start`, `/stop`, `/status`.
  - Класс `ScriptHubApp` — графический интерфейс пользователя.
- **Связи с другими файлами:**  
  - Работает с файлами в папке `scripts/` (загрузка, запуск, удаление).
- **Краткое объяснение логики:**  
  - При запуске стартует Flask-сервер в отдельном потоке.
  - Через GUI можно загружать скрипты, запускать/останавливать их, просматривать статус и логи.
  - Все процессы запускаются через `subprocess.Popen`, их PID и статус отслеживаются.

### **scripts/**
- **Назначение:**  
  Каталог для хранения пользовательских Python-скриптов, которые можно запускать через хаб.
- **Ключевые функции/классы:**  
  - Нет, это просто папка для файлов.
- **Связи с другими файлами:**  
  - Все операции загрузки, запуска и остановки скриптов происходят с файлами из этой папки.
- **Краткое объяснение логики:**  
  - Любой загруженный через GUI `.py`-файл помещается сюда и становится доступен для запуска.

---

## 3. Архитектура проекта

### **Общая структура**
- Проект реализован как монолитное приложение с единой точкой входа.
- Flask-сервер и Tkinter-GUI работают параллельно в одном процессе (сервер — в отдельном потоке).
- Вся логика управления процессами и файловыми операциями инкапсулирована в одном файле.

### **Потоки данных**
- Пользователь взаимодействует с GUI.
- GUI отправляет HTTP-запросы на локальный Flask-сервер.
- Сервер обрабатывает запросы, управляет процессами и файлами, возвращает статус.
- Менеджер процессов отслеживает все запущенные скрипты, их PID и статус.
---

## 4. Библиотеки/фреймворки

| Название         | Назначение                                 | Где используются                |
|------------------|--------------------------------------------|---------------------------------|
| Flask            | Backend API, обработка HTTP-запросов       | Весь backend, API               |
| Tkinter, ttk     | Графический интерфейс                      | Весь frontend                   |
| requests         | HTTP-запросы из GUI к backend              | Внутри GUI                      |
| subprocess       | Запуск и управление внешними процессами    | ScriptManager                   |
| threading        | Запуск Flask-сервера параллельно с GUI     | В точке входа                   |
| werkzeug         | Безопасное сохранение файлов               | В upload-эндпоинте              |
| os, sys, time    | Работа с файлами, путями, ожидания         | Везде                           |

---

## 5. Точка входа и запуск

- **Точка входа:**  
  `Server Hub.py`
- **Как запускается проект:**  
  ```
  python "Server Hub.py"
  ```
- **Что выполняется первым:**  
  - Создаётся папка `scripts/` (если не существует).
  - Запускается Flask-сервер в отдельном потоке.
  - После старта сервера запускается Tkinter GUI.
  - Пользователь может загружать, запускать и останавливать скрипты через интерфейс.

---

## 6. Архитектурные особенности

- **Монолит:**  
  Вся логика (сервер, GUI, менеджер процессов) реализована в одном файле для простоты запуска и поддержки.
- **Параллельная работа:**  
  Flask-сервер работает в отдельном потоке, что позволяет GUI и backend-логике работать одновременно.
- **Гибкость:**  
  Любой Python-скрипт можно загрузить и запустить, если он не требует пользовательского ввода.
- **Безопасность:**  
  Загрузка файлов ограничена только `.py`-файлами, используется безопасное имя файла.
- **Логи процессов:**  
  (Можно доработать) — сейчас предусмотрено место для вывода логов каждого процесса.
